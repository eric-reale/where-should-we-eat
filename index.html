<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Where Should We Eat?</title>
  <meta name="description" content="">
  <meta name="author" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Raleway:300,400,600&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="./src/css/base.css">
</head>
 <body onload="init()">
  <div class="container">
    <center>
      <div>
        <h1 class="header">Where should we eat?</h1>
        <h2> LET'S FIND OUT</h2>
      </div>
    </center>

    <div class="rouletteContainer">
      <div class="line">
      </div>
      <div id="rouletteWheel" class="roulette">
      </div>
    </div>

    <br><br><br><br><br><br><br><br>

    <center>
      <div>
        <button id="startButton" onclick="play()">EATIN' TIME</button>
      </div>
    </center>

    <br><br>

    <div>
    </div>
    <div id="winners" class="winners">
    </div>

    <br><br>
  </div>

  </body>
  <script>
    var bets =  [
        ["player1", "#FFFFFF"],
        ["player2", "#DDD000"],
        ["player3", "#FFFFFF"],
        ["player4", "#DDD000"],
        ["player5", "#FFFFFF"],
        ["player6", "#DDD000"],
        ["player7", "#FFFFFF"],
        ["player8", "#DDD000"],
        ["player9", "#FFFFFF"],
        ["player10", "#DDD000"],
      ];

    let prevOffset;

    const amountOfBoxes = (bets.length * 30); // number in init() for i

    // 140 pixels in each div

    function init(){
      let roulette = document.getElementById("rouletteWheel");
      roulette.innerHTML = "";

      for(let i = 0; i < 30; i++){
        for(let j = 0; j < bets.length; j++) {
          let eachResto = bets[j];
          var node = document.createElement("div");
          var h3 = document.createElement("h3");
          h3.innerHTML = eachResto[0];
          h3.style.backgroundColor = eachResto[1];
          node.appendChild(h3);
          roulette.appendChild(node);
        }
      }
    }

    function rand (min, max) {
        return Math.floor(Math.random() * (max - min)) + min;
    }

    function play (offset) {
      if (offset === undefined) {
        var offset = rand(7500, (amountOfBoxes*140-1000));
        if (offset - prevOffset <= 3000 || prevOffset - offset <= 3000) {
          offset = rand(7500, (amountOfBoxes*140-1000));
        };
      }
      //var audio = new Audio('spin.mp3');
      //audio.play();
      document.getElementById("rouletteWheel").style.left = -(offset-180) + "px";

      let chosenPlayerDiv = document.createElement("div");
      chosenPlayerDiv.classList.add('winnerwinnerchickendinner');
      let chosenPlayer = (Math.ceil((offset/140)) % bets.length); // Takes the pixel offset amount divided by 140px per div, then takes mod to get remainder. Remainder is index-1 of bets array for winner.
      chosenPlayer = (bets[chosenPlayer-1]);
      chosenPlayerDiv.innerHTML = chosenPlayer[0]
      setTimeout(function(){
        console.log(chosenPlayer)
        document.getElementById("winners").appendChild(chosenPlayerDiv);
        }, 5500)
      prevOffset = offset;
    }

    window.addEventListener("keydown", function(event){
      if(event.keyCode == 13){
        play();
      }
    })
  </script>

  <script src="./src/index.js"></script>
</html>



